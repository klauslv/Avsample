#1ã€æŒ‡å®šcmakeçš„æœ€å°ç‰ˆæœ¬
cmake_minimum_required(VERSION 3.4.1)

#æ‰¾åˆ°åŒ…å«æ‰€æœ‰çš„CPPæ–‡ä»¶
file(GLOB allCpp *.cpp)

#æ‰“å°å½“å‰cmakeListsçš„è·¯å¾„
message("å½“å‰cmakeçš„è·¯å¾„ï¼š${CMAKE_SOURCE_DIR} \n cpuæ¶æ„ï¼š${CMAKE_ANDROID_ARCH_ABI}")

#åŠ å…¥cppåŸæ–‡ä»¶
add_library(
        #åº“çš„åå­—
        ffmpeg_lib
        #å¯ä»¥å…±äº«
        SHARED
        #native-lib.cppæ›¿æ¢${allCpp}æ‰¹é‡å¯¼å…¥æ–‡ä»¶
        ${allCpp})

# åªèƒ½æ‰¾ç³»ç»Ÿçš„
find_library(
        log-lib
        log)

#å¼•å…¥FFmpegçš„å¤´æ–‡ä»¶
include_directories(${CMAKE_SOURCE_DIR}/include)

# å¼•å…¥FFmpegçš„åº“æ–‡ä»¶ï¼Œè®¾ç½®å†…éƒ¨çš„æ–¹å¼å¼•å…¥ï¼ŒæŒ‡å®šåº“çš„ç›®å½•æ˜¯-L æŒ‡å®šå…·ä½“çš„åº“æ˜¯-l
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -L${CMAKE_SOURCE_DIR}/${CMAKE_ANDROID_ARCH_ABI}")


message("å½“å‰çš„logè·¯å¾„åœ¨å“ªé‡Œå•Š >>>>>>>>> ${log-lib}")

#å¼€å§‹é“¾æ¥ğŸ”çš„åº“
target_link_libraries(
        ffmpeg_lib
        # å…ˆæŠŠæœ‰ä¾èµ–çš„åº“ï¼Œå…ˆä¾èµ–è¿›æ¥
        avformat avcodec avfilter avutil swresample swscale

        ${log-lib}
)